db:
  image: postgres:10
  ports:
    - "54322:5432"
  env_file:
    - docker-compose.env
web:
  build: .
  volumes:
    - .:/app
  ports:
    - "3000:3000"
  links:
    - db
notebook:
  # build: notebook
  image: rubydata/datascience-notebook
  environment:
    GRANT_SUDO: "yes"
  volumes:
    - ./notebook:/home/jovyan/work
  ports:
    - ${NOTEBOOK_PORT}:8888
  env_file:
    - docker-compose.env
  links:
    - db
  command: "start-notebook.sh \
    --NotebookApp.password=${NOTEBOOK_ACCESS_TOKEN}"
